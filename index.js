(function(m,o,p,e,E,f,s,g,y,R){"use strict";const F=p.findByProps("openLazy","hideActionSheet"),{FormRow:A,FormIcon:D}=s.Forms,L=/^```(?:json)\n([\s\S]*?)```$/gm,w=f.getAssetIDByName("ic_download_24px");function M(){return E.before("openLazy",F,function(n){let[a,t]=n;t==="MessageLongPressActionSheet"&&a.then(function(r){const u=E.after("default",r,function(d,c){let[{message:b}]=d;e.React.useEffect(function(){return function(){u()}},[]);const S=b.content.match(L)?.map(function(l){return l.slice(7,l.length-3)}).map(function(l){try{return JSON.parse(l)}catch{return}}).filter(function(l){return l}).filter(function(l){return typeof l.name=="string"&&l.name&&typeof l.match=="string"&&typeof l.replace=="string"&&typeof l.flags=="string"&&typeof l.regex=="boolean"});if(!S||S.length==0)return;let ue=c?.props?.children?.props?.children?.props?.children[1];for(const l of S){const ie=function(){o.storage.rules.push(l),g.showToast(`Imported rule ${l.name}`,w),F.hideActionSheet()},de=e.React.createElement(A,{leading:e.React.createElement(D,{style:{opacity:1},source:w}),label:`Import ${l.name}`,onPress:ie});ue.unshift(de)}})})})}const V=p.findByProps("sendMessage","receiveMessage"),B=f.getAssetIDByName("ic_warning_24px");function U(){return E.before("sendMessage",V,function(n){const a=o.storage.rules.filter(function(r){return r.match});let t=n[1].content;for(const r of a)if(r.regex)try{const u=new RegExp(r.match,r.flags);t=t.replace(u,r.replace)}catch(u){console.log(u),g.showToast(`Failed to use RegExp for ${r.name}!`,B);continue}else t=t.replaceAll(r.match,r.replace);n[1].content=t})}const{TouchableOpacity:O}=s.General,{FormIcon:k}=s.Forms,z=f.getAssetIDByName("ic_add_24px");function G(n){let{onPress:a}=n;return React.createElement(O,{onPress:a},React.createElement(k,{source:z,style:{marginRight:-8,marginLeft:8,opacity:1}}))}const{ScrollView:j}=s.General,{FormSection:i,FormInput:h,FormDivider:C,FormSwitchRow:J,FormRow:x,FormLabel:K}=s.Forms,X=f.getAssetIDByName("ic_message_copy"),Y=e.stylesheet.createThemedStyleSheet({delete:{color:R.rawColors.RED_400}});function N(n){let{ruleIndex:a}=n,t=o.storage.rules[a];y.useProxy(o.storage);const r=e.NavigationNative.useNavigation(),u=function(){const c=`\`\`\`json
${JSON.stringify(t,null,4)}
\`\`\``;e.clipboard.setString(c),g.showToast(`Copied ${t.name} to Clipboard`,X)},d=function(){o.storage.rules.splice(a,1),r.pop()};return React.createElement(j,null,React.createElement(i,null,React.createElement(h,{value:t?.name,onChange:function(c){return t.name=c},placeholder:"New rule",title:"Name"})),React.createElement(i,null,React.createElement(h,{value:t?.match,onChange:function(c){return t.match=c},placeholder:"foo",title:"Match"}),t?.regex&&React.createElement(React.Fragment,null,React.createElement(C,null),React.createElement(h,{title:"Flags",placeholder:"gi",value:t?.flags,onChange:function(c){return t.flags=c}})),React.createElement(C,null),React.createElement(h,{value:t?.replace,onChange:function(c){return t.replace=c},placeholder:"bar",title:"Replace with"})),React.createElement(i,null,React.createElement(J,{label:"Regular expression",subLabel:"Turn on if your rule is a regular expression",value:t?.regex,onValueChange:function(c){return t.regex=c}})),React.createElement(i,null,React.createElement(x,{label:"Copy code block to Clipboard",onPress:u})),React.createElement(i,null,React.createElement(x,{label:React.createElement(K,{text:"Delete Rule",style:Y.delete}),onPress:d})))}const{FormRow:q,FormArrow:H}=s.Forms;function Q(n){let{rule:a,index:t}=n;const r=e.NavigationNative.useNavigation();return React.createElement(q,{label:a.name,trailing:React.createElement(H,null),onPress:function(){return r.push("VendettaCustomPage",{title:"Editing Rule",render:function(){return React.createElement(N,{ruleIndex:t})}})}})}const{ScrollView:W}=s.General,{FormSection:v,FormInput:Z,Button:ee,FormDivider:fe,FormSwitchRow:te,FormRow:ge,FormLabel:Re}=s.Forms;e.stylesheet.createThemedStyleSheet({delete:{color:R.rawColors.RED_400}});function ne(){return{vencordSyncEnabled:!1,authenticated:!1,backendUrl:"https://api.vencord.dev/"}}function re(){let n=o.storage.vencordCloudSyncSettings??ne();return y.useProxy(o.storage),e.NavigationNative.useNavigation(),React.createElement(W,null,React.createElement(v,null,React.createElement(te,{label:"Enable Cloud Integrations",subLabel:"This will request authorization if you have not yet set up cloud integrations.",value:n.vencordSyncEnabled,onValueChange:function(a){return n.vencordSyncEnabled=a}})),React.createElement(v,null,React.createElement(Z,{value:n.backendUrl,onChange:function(a){return n.backendUrl=a},title:"Backend URL"})),React.createElement(v,null,React.createElement(ee,{sublabel:"This will overwrite your local settings with the ones on the cloud. Use wisely!",disabled:!n.authenticated,onPress:function(){return g.showToast("Sync from Cloud was pressed but nothing happened yet.")}},"Sync from Cloud")))}const{ScrollView:ae,TextInput:le}=s.General,{FormRow:P,FormSection:$,FormDivider:I}=s.Forms,T=e.stylesheet.createThemedStyleSheet({input:{fontSize:16,fontFamily:e.constants.Fonts.PRIMARY_MEDIUM,color:R.semanticColors.TEXT_NORMAL},placeholder:{color:R.semanticColors.INPUT_PLACEHOLDER_TEXT}}),ce=p.findByName("useIsFocused");function oe(){const[n,a]=e.React.useState("");let t=o.storage.rules;y.useProxy(o.storage);const r=e.NavigationNative.useNavigation();ce();const u=function(){n&&(t.push({name:n.trim(),match:"",flags:"gi",replace:"",regex:!1}),a(""),r.push("VendettaCustomPage",{title:"Editing Rule",render:function(){return e.React.createElement(N,{ruleIndex:t.length-1})}}))},d=function(){r.push("VendettaCustomPage",{title:"Vencord TextReplace Cloud Sync",render:function(){return e.React.createElement(re,null)}})};return e.React.createElement(ae,null,e.React.createElement($,{title:"Rules"},t.map(function(c,b){return e.React.createElement(e.React.Fragment,null,e.React.createElement(Q,{rule:c,index:b}),e.React.createElement(I,null))}),e.React.createElement(P,{label:e.React.createElement(le,{value:n,onChangeText:a,placeholder:"New rule",placeholderTextColor:T.placeholder.color,selectionColor:e.constants.Colors.PRIMARY_DARK_100,onSubmitEditing:u,returnKeyType:"done",style:T.input}),trailing:e.React.createElement(G,{onPress:u})})),e.React.createElement(I,null),e.React.createElement($,null,e.React.createElement(P,{label:"Vencord TextReplace Cloud Sync Settings",onPress:d})))}let _;var se={onLoad:function(){var n;(n=o.storage).rules??(n.rules=[]),_=[U(),M()]},onUnload:function(){for(const n of _)n()},settings:oe};return m.default=se,Object.defineProperty(m,"__esModule",{value:!0}),m})({},vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui.assets,vendetta.ui.components,vendetta.ui.toasts,vendetta.storage,vendetta.ui);
